{{ 'carrusel-tab.css' | asset_url | stylesheet_tag }}

<tabs-container>
  <section class="tabs-titles">
    {% for block in section.blocks %}
      {% if block.settings.tab-title %}
        <tab-title class="tab-title" index="{{ forloop.index }}"
          {% if forloop.first %} active {% endif %}
        >{{ block.settings.tab-title }}</tab-title>
      {% endif %}
    {% endfor %}
  </section>

  <section class="tabs-contents">
    {% for block in section.blocks %}
      {% if block.settings.tab-collection %}
        <tab-content class="tab-content" index="{{ forloop.index }}"
          {% if forloop.first %} active {% endif %}
        >
          <div class="products-grid">
            {% for product in block.settings.tab-collection.products %}
              <div class="product-card">
                <img src="{{ product.featured_image | image_url: width: 300 }}" alt="{{ product.title }}">
                <h3>{{ product.title }}</h3>
                <p class="price">{{ product.price | money }}</p>
                <a href="{{ product.url }}" class="btn">Ver producto</a>
              </div>
            {% else %}
              <p>No hay productos en esta colecci√≥n.</p>
            {% endfor %}
          </div>
        </tab-content>
      {% endif %}
    {% endfor %}
  </section>
</tabs-container>

{% schema %}
{
  "name": "Carrusel Tabs",
  "class": "carrousel-tabs-container",
  "tag": "section",
  "settings": [],
  "blocks": [
    {
      "type": "carrusel-tab",
      "name": "Carrusel Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab-title",
          "label": "Tab title"
        },
        {
          "type": "collection",
          "id": "tab-collection",
          "label": "Tab Collection",
          "info": "Select a collection for this tab."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Carrusel Tabs"
    }
  ]
}
{% endschema %}
